<!DOCTYPE html>
<html lang="es" data-bs-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aletzi_System</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
    />
    <style>
      /* Estilos personalizados para el modo oscuro */
      [data-bs-theme="dark"] {
        --bs-body-bg: #212529;
        --bs-body-color: #f8f9fa;
      }

      [data-bs-theme="dark"] .card {
        background-color: #343a40;
        border-color: #495057;
      }

      [data-bs-theme="dark"] .table {
        color: #e9ecef;
        border-color: #495057;
      }

      [data-bs-theme="dark"] .table th,
      [data-bs-theme="dark"] .table td {
        border-color: #495057;
        background-color: #343a40;
      }

      [data-bs-theme="dark"] .table-striped tbody tr:nth-of-type(odd) {
        background-color: #2c3034;
      }

      [data-bs-theme="dark"] .table-hover tbody tr:hover {
        background-color: #3d4349;
      }

      [data-bs-theme="dark"] .table thead th {
        background-color: #2c3034;
        border-color: #495057;
      }

      [data-bs-theme="dark"] .modal-content {
        background-color: #343a40;
        color: #e9ecef;
      }

      [data-bs-theme="dark"] .form-control,
      [data-bs-theme="dark"] .form-select {
        background-color: #2c3034;
        border-color: #495057;
        color: #e9ecef;
      }

      [data-bs-theme="dark"] .input-group-text {
        background-color: #343a40;
        border-color: #495057;
        color: #e9ecef;
      }

      [data-bs-theme="dark"] .dropdown-menu {
        background-color: #343a40;
        border-color: #495057;
      }

      [data-bs-theme="dark"] .dropdown-item {
        color: #e9ecef;
      }

      [data-bs-theme="dark"] .dropdown-item:hover {
        background-color: #495057;
      }

      [data-bs-theme="dark"] .list-group-item {
        background-color: #343a40;
        border-color: #495057;
        color: #e9ecef;
      }

      [data-bs-theme="dark"] .bg-light,
      [data-bs-theme="dark"] .bg-white {
        background-color: #343a40 !important;
        color: #e9ecef !important;
      }

      [data-bs-theme="dark"] .border {
        border-color: #495057 !important;
      }

      [data-bs-theme="dark"] .text-dark {
        color: #e9ecef !important;
      }

      [data-bs-theme="dark"] .btn-light {
        background-color: #495057;
        border-color: #6c757d;
        color: #e9ecef;
      }

      [data-bs-theme="dark"] .btn-outline-dark {
        color: #e9ecef;
        border-color: #e9ecef;
      }

      [data-bs-theme="dark"] .btn-outline-dark:hover {
        background-color: #e9ecef;
        color: #212529;
      }

      /* Estilos para el footer */
      footer {
        margin-top: 50px;
        border-top: 1px solid rgba(255, 255, 255, 0.2);
      }

      footer a:hover {
        text-decoration: underline !important;
        opacity: 0.9;
      }

      [data-bs-theme="dark"] footer {
        background-color: #343a40 !important;
      }

      /* Estilos para mantener el footer al pie de página */
      html,
      body {
        height: 100%;
        margin: 0;
      }

      body {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }

      .container {
        flex: 1;
      }

      footer {
        margin-top: auto;
        padding: 20px 0;
        box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.1);
      }

      footer .social-icons {
        font-size: 1.5rem;
        margin-top: 10px;
      }

      footer .social-icons a {
        margin: 0 8px;
        transition: transform 0.3s ease;
      }

      footer .social-icons a:hover {
        transform: translateY(-5px);
      }

      /* Estilos para el botón de cambio de tema */
      .theme-toggle {
        cursor: pointer;
        padding: 5px 10px;
        border-radius: 20px;
        display: flex;
        align-items: center;
        gap: 5px;
      }

      /* Estilos para los elementos de navegación */
      .navbar .nav-link {
        padding: 8px 15px;
        margin: 0 5px;
        border-radius: 8px;
        transition: all 0.3s ease;
        font-weight: 500;
        color: rgba(255, 255, 255, 0.95) !important;
      }

      .navbar .nav-link:hover {
        background-color: rgba(255, 255, 255, 0.25);
        transform: translateY(-2px);
        color: #ffffff !important;
        text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
      }

      .navbar .nav-link.active {
        background-color: rgba(255, 255, 255, 0.3);
        color: #ffffff !important;
      }

      .navbar .nav-link i {
        margin-right: 5px;
        font-size: 1.1em;
      }

      /* Estilos para los botones de acción */
      .navbar-action-buttons .btn {
        padding: 8px 16px;
        font-weight: 500;
        border-width: 2px;
        transition: all 0.3s ease;
        color: #ffffff;
        border-color: rgba(255, 255, 255, 0.9);
      }

      .navbar-action-buttons .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        background-color: rgba(255, 255, 255, 0.15);
      }
      .navbar-action-buttons .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      /* Estilos responsive para los botones */
      @media (max-width: 767.98px) {
        .navbar-action-buttons {
          margin-top: 10px;
          display: flex;
          width: 100%;
          justify-content: space-between;
        }

        .theme-toggle {
          width: 48%;
          justify-content: center;
        }

        .logout-button {
          width: 48%;
          justify-content: center;
          display: flex;
          align-items: center;
        }
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4">
      <div class="container">
        <a class="navbar-brand" href="{{ url_for('index') }}"
          >Sistema de inventario</a
        >
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          {% if session.user_id %}
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('index') }}">
                <i class="bi bi-box-seam"></i> Inventario
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('realizar_venta') }}">
                <i class="bi bi-cart-plus"></i> Realizar Venta
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('historial_ventas') }}">
                <i class="bi bi-clock-history"></i> Historial de Ventas
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('reportes') }}">
                <i class="bi bi-graph-up"></i> Reportes
              </a>
            </li>
          </ul>
          <div class="d-flex align-items-center navbar-action-buttons">
            <!-- Botón de cambio de tema -->
            <button
              id="themeToggle"
              class="btn btn-outline-light me-md-3 theme-toggle"
            >
              <i class="bi bi-sun-fill" id="themeIcon"></i>
              <span id="themeText" class="d-none d-sm-inline">Modo Claro</span>
            </button>
            <a
              class="btn btn-outline-light logout-button"
              href="{{ url_for('logout') }}"
            >
              <i class="bi bi-box-arrow-right"></i>
              <span class="d-none d-sm-inline">Cerrar Sesión</span>
            </a>
          </div>
          {% endif %}
        </div>
      </div>
    </nav>

    <div class="container">
      {% with messages = get_flashed_messages() %} {% if messages %}
      <div class="alert alert-info alert-dismissible fade show" role="alert">
        {% for message in messages %} {{ message }} {% endfor %}
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="alert"
          aria-label="Close"
        ></button>
      </div>
      {% endif %} {% endwith %} {% block content %}{% endblock %}
    </div>

    <!-- Footer con información de contacto -->
    <footer class="py-4 bg-primary text-white">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-md-4 mb-3 mb-md-0">
            <h5 class="fw-bold">Aletzi_System</h5>
            <p class="mb-0">Sistema de gestión de inventario</p>
            <p class="small">© 2025 Desarrollado por Aletzi</p>
          </div>
          <div class="col-md-4 mb-3 mb-md-0 text-center">
            <div class="social-icons">
              <a
                href="https://wa.me/+1234567890"
                class="text-white"
                target="_blank"
              >
                <i class="bi bi-whatsapp"></i>
              </a>
              <a href="#" class="text-white" target="_blank">
                <i class="bi bi-facebook"></i>
              </a>
              <a href="#" class="text-white" target="_blank">
                <i class="bi bi-instagram"></i>
              </a>
            </div>
          </div>
          <div class="col-md-4 text-md-end">
            <a
              href="https://wa.me/+5352588280"
              class="text-white text-decoration-none d-block"
              target="_blank"
            >
              <i class="bi bi-whatsapp me-2"></i>Contáctame por WhatsApp
            </a>
          </div>
        </div>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Script para el cambio de tema
      document.addEventListener("DOMContentLoaded", function () {
        try {
          // Verificar si estamos en una página que necesita el tema
          const isLoginPage = window.location.pathname === '/login';
          
          // Establecer el tema básico para todas las páginas
          const html = document.documentElement;
          const savedTheme = localStorage.getItem("theme") || "light";
          html.setAttribute("data-bs-theme", savedTheme);

          // Si estamos en la página de login, no ejecutar el resto del código
          if (isLoginPage) {
            return;
          }

          // El resto del código solo se ejecuta en páginas que no son login
          const themeToggle = document.getElementById("themeToggle");
          const themeIcon = document.getElementById("themeIcon");
          const themeText = document.getElementById("themeText");

          if (!themeToggle || !themeIcon || !themeText) {
            console.log("Elementos del tema no encontrados, omitiendo inicialización del tema");
            return;
          }

          // Actualizar UI inicial
          updateThemeUI(savedTheme);

          // Manejar cambio de tema
          themeToggle.addEventListener("click", function () {
            const currentTheme = html.getAttribute("data-bs-theme");
            const newTheme = currentTheme === "light" ? "dark" : "light";
            html.setAttribute("data-bs-theme", newTheme);
            localStorage.setItem("theme", newTheme);
            updateThemeUI(newTheme);
          });

          // Función para actualizar UI
          function updateThemeUI(theme) {
            try {
              themeIcon.className = theme === "dark" ? "bi bi-moon-fill" : "bi bi-sun-fill";
              themeText.textContent = theme === "dark" ? "Modo Oscuro" : "Modo Claro";
              
              if (theme === "dark") {
                themeToggle.classList.remove("btn-outline-light");
                themeToggle.classList.add("btn-outline-secondary");
              } else {
                themeToggle.classList.remove("btn-outline-secondary");
                themeToggle.classList.add("btn-outline-light");
              }
            } catch (error) {
              console.log("Error al actualizar UI del tema:", error);
            }
          }
        } catch (error) {
          console.log("Error en la inicialización del tema:", error);
        }
      });
    </script>
  </body>
</html>
